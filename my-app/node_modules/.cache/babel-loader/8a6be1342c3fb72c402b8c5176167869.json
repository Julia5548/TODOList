{"ast":null,"code":"var _jsxFileName = \"/home/julia/ToDoList/my-app/src/ pages/User.tsx\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Route from '../Router';\nimport { reset } from 'redux-form';\nimport { call, takeEvery } from \"redux-saga/effects\";\n\nconst requestSuccess = () => {\n  reset('createTask');\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onAddTask: newTask => {\n      dispatch(addTaskAction(newTask));\n    },\n    onToggle: task => {\n      dispatch(toggleTaskAction(task));\n    },\n    onRemove: task => {\n      dispatch(removeTaskAction(task));\n    }\n  };\n};\n\nconst toggleTaskAction = task => {\n  return {\n    type: 'TOGGLE_TASK',\n    task\n  };\n};\n\nconst removeTaskAction = task => {\n  return {\n    type: 'REMOVE_TASK',\n    task\n  };\n};\n\nconst addTaskAction = newTask => {\n  return {\n    type: 'CREATE_TASK',\n    newTask\n  };\n};\n\nfunction getCookie(name) {\n  let cookieValue = null;\n\n  if (document.cookie && document.cookie !== '') {\n    const cookies = document.cookie.split(';');\n\n    for (let i = 0; i < cookies.length; i++) {\n      const cookie = cookies[i].trim(); // Does this cookie string begin with the name we want?\n\n      if (cookie.substring(0, name.length + 1) === name + '=') {\n        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n        break;\n      }\n    }\n  }\n\n  return cookieValue;\n}\n\nexport function* watchCreateTask() {\n  yield takeEvery('CREATE_TASK', workCreateTask);\n}\nexport function* watchToggleTask() {\n  yield takeEvery('TOGGLE_TASK', workToggleTask);\n}\nexport function* watchRemoveTask() {\n  yield takeEvery('REMOVE_TASK', workRemoveTask);\n}\n\nfunction* workToggleTask(action) {\n  const task = action.task;\n  console.log('toggle: ', task);\n  task.completed = !task.completed;\n  const csrftoken = getCookie('csrftoken');\n  const url = 'http://127.0.0.1:8000/api/task_update/' + task.id + '/';\n\n  try {\n    const data = yield call(() => {\n      fetch(url, {\n        mode: 'cors',\n        method: 'POST',\n        headers: {\n          'Content-type': 'application/json',\n          'X-CSRFToken': csrftoken\n        },\n        body: JSON.stringify(task)\n      }).catch(function (error) {\n        console.log('ERROR:', error);\n      });\n    });\n    yield console.log(`response = ${JSON.stringify(data)}`);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* workCreateTask(action) {\n  console.log(action.newTask); // const csrftoken = getCookie('csrftoken');\n  // const url = 'http://127.0.0.1:8000/api/task_create/'\n  // try{\n  //     const data = yield call(() => {\n  //         fetch(url, {\n  //             mode : 'cors',\n  //             method: 'POST',\n  //             headers : {\n  //                 'Content-type' : 'application/json',\n  //                 'X-CSRFToken' : csrftoken!,\n  //             },\n  //             body : JSON.stringify(action.newTask)\n  //         }).catch(function(error){\n  //             console.log('ERROR:' , error)\n  //         })\n  //     })\n  //     yield console.log(`response = ${JSON.stringify(data)}`); \n  // } catch(error){\n  //     console.log(error)\n  // }\n}\n\nfunction* workRemoveTask(action) {\n  const task = action.task;\n  console.log('remove: ', task);\n  const csrftoken = getCookie('csrftoken');\n  const url = 'http://127.0.0.1:8000/api/task_delete/' + task.id + '/';\n\n  try {\n    yield call(() => {\n      fetch(url, {\n        mode: 'cors',\n        method: 'DELETE',\n        headers: {\n          'Content-type': 'application/json',\n          'X-CSRFToken': csrftoken\n        }\n      }).then(response => {\n        console.log('deleted : ', response);\n      }).catch(function (error) {\n        console.log('ERROR:', error);\n      });\n    });\n  } catch (error) {\n    console.log(error);\n  } //setTodo(prev => prev.filter(todo => todo.id !== id))\n\n}\n\nexport const User = props => {\n  // const[todoList, setTodo] = useState<ITodo[]>([])\n  // useEffect(() => {\n  //     console.log('Fetching...')\n  //     fetch('http://127.0.0.1:8000/api/task_list/',\n  //     {\n  //         mode: 'cors',\n  //     })\n  //     .then(response => response.json())\n  //     .then(data => {\n  //         setTodo(data)\n  //     })\n  // }, [])\n  return /*#__PURE__*/React.createElement(Route, Object.assign({}, props, {\n    todoList: todoList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  }));\n};\nexport default connect(null, mapDispatchToProps)(User);","map":{"version":3,"sources":["/home/julia/ToDoList/my-app/src/ pages/User.tsx"],"names":["React","connect","Route","reset","call","takeEvery","requestSuccess","mapDispatchToProps","dispatch","onAddTask","newTask","addTaskAction","onToggle","task","toggleTaskAction","onRemove","removeTaskAction","type","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","watchCreateTask","workCreateTask","watchToggleTask","workToggleTask","watchRemoveTask","workRemoveTask","action","console","log","completed","csrftoken","url","id","data","fetch","mode","method","headers","body","JSON","stringify","catch","error","then","response","User","props","todoList"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { connect } from 'react-redux';\nimport Route from '../Router'\nimport { ITodo } from '../interface';\nimport { reset } from 'redux-form';\nimport { call, takeEvery } from \"redux-saga/effects\" ;\n\n\nconst requestSuccess = () =>{\n    reset('createTask')\n}\n\nconst mapDispatchToProps = (dispatch) => {\n\n    return({\n        onAddTask : (newTask : ITodo) => {\n            dispatch(addTaskAction(newTask))\n        },\n        onToggle : (task : ITodo) => {\n            dispatch(toggleTaskAction(task))\n        },\n        onRemove : (task : ITodo) => {\n            dispatch(removeTaskAction(task))\n        }\n    })\n}\n\nconst toggleTaskAction = (task : ITodo) => {\n    return {\n        type: 'TOGGLE_TASK',\n        task\n    }\n}\n\nconst removeTaskAction = (task : ITodo) => {\n    return {\n        type : 'REMOVE_TASK',\n        task\n    }\n}\n\nconst addTaskAction = (newTask : ITodo) =>{\n    return {\n        type: 'CREATE_TASK',\n        newTask\n    }\n}\n\nfunction getCookie(name : string) {\n    let cookieValue : string | null = null;\n    if (document.cookie && document.cookie !== '') {\n        const cookies = document.cookie.split(';');\n        for (let i = 0; i < cookies.length; i++) {\n            const cookie = cookies[i].trim();\n            // Does this cookie string begin with the name we want?\n            if (cookie.substring(0, name.length + 1) === (name + '=')) {\n                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\n                break;\n            }\n        }\n    }\n    return cookieValue;\n}\n\nexport function* watchCreateTask(){\n    yield takeEvery('CREATE_TASK', workCreateTask)\n}\n\nexport function* watchToggleTask(){\n    yield takeEvery('TOGGLE_TASK', workToggleTask)\n}\n\nexport function* watchRemoveTask(){\n    yield takeEvery('REMOVE_TASK', workRemoveTask)\n}\n\nfunction* workToggleTask(action){\n    \n    const task : ITodo = action.task\n    console.log('toggle: ', task)\n    task.completed = !task.completed\n\n    const csrftoken = getCookie('csrftoken');\n    const url = 'http://127.0.0.1:8000/api/task_update/' + task.id + '/'\n        \n    try{\n        const data = yield call(() => {\n            fetch(url, {\n                mode : 'cors',\n                method: 'POST',\n                headers : {\n                    'Content-type' : 'application/json',\n                    'X-CSRFToken' : csrftoken!,\n                },\n                body : JSON.stringify(task)\n            }).catch(function(error){\n                console.log('ERROR:' , error)\n            })\n        })\n        yield console.log(`response = ${JSON.stringify(data)}`); \n    } catch(error){\n        console.log(error)\n    }\n}\n\nfunction* workCreateTask(action) {\n\n    console.log(action.newTask)\n\n    // const csrftoken = getCookie('csrftoken');\n    // const url = 'http://127.0.0.1:8000/api/task_create/'\n        \n    // try{\n    //     const data = yield call(() => {\n    //         fetch(url, {\n    //             mode : 'cors',\n    //             method: 'POST',\n    //             headers : {\n    //                 'Content-type' : 'application/json',\n    //                 'X-CSRFToken' : csrftoken!,\n    //             },\n    //             body : JSON.stringify(action.newTask)\n    //         }).catch(function(error){\n    //             console.log('ERROR:' , error)\n    //         })\n    //     })\n    //     yield console.log(`response = ${JSON.stringify(data)}`); \n    // } catch(error){\n    //     console.log(error)\n    // }\n}\n\nfunction* workRemoveTask(action){\n    \n    const task : ITodo = action.task\n    console.log('remove: ', task)\n\n    const csrftoken = getCookie('csrftoken');\n    const url = 'http://127.0.0.1:8000/api/task_delete/' + task.id + '/'\n        \n    try{\n        yield call(() => {\n            fetch(url, {\n                mode : 'cors',\n                method: 'DELETE',\n                headers : {\n                    'Content-type' : 'application/json',\n                    'X-CSRFToken' : csrftoken!,\n                },\n            }).then((response) => {\n                console.log('deleted : ', response)\n            })\n            .catch(function(error){\n                console.log('ERROR:' , error)\n            })\n        })\n    } catch(error){\n        console.log(error)\n    }\n    //setTodo(prev => prev.filter(todo => todo.id !== id))\n}\nexport const User = (props : any) => {\n\n    // const[todoList, setTodo] = useState<ITodo[]>([])\n\n    // useEffect(() => {\n    //     console.log('Fetching...')\n    //     fetch('http://127.0.0.1:8000/api/task_list/',\n    //     {\n    //         mode: 'cors',\n    //     })\n    //     .then(response => response.json())\n    //     .then(data => {\n    //         setTodo(data)\n    //     })\n    // }, [])\n\n    return (\n        <Route {...props} todoList = {todoList}/>\n    );\n}\n\nexport default connect(null, mapDispatchToProps)(User);"]},"metadata":{},"sourceType":"module"}